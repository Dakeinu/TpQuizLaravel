import{u as g,r as p,b as q,x as w,c as y,o as i,d as b,e,k as x,v as A,t as v,F as h,i as N,s as Q}from"./vendor.20d4d45b.js";import{_ as C,A as E,u as k}from"./index.2a1fb1ab.js";import{A as z}from"./question.4dac6f8d.js";const j={components:{AppQuestion:z},setup(){const c=g(),s=k(),t=p([]),n=q(""),u=w(()=>t.reduce((l,r)=>l+r.earnings,0));return{label:n,questions:t,addQuestion:()=>{const l=Date.now().toString()+Math.random().toString();t.push({id:l,label:"",earnings:0,answer:"NONE",choices:[]})},totalEarnings:u,submit:async()=>{if(t.length<=0)return s("error","You must add at least one question.");if(!t.every(o=>o.label.trim().length>0))return s("error","All questions must have a label.");if(!t.every(o=>o.earnings>0))return s("error","All questions must have an earning.");if(!t.every(o=>o.choices.length>0))return s("error","All questions must have at least one choice.");if(!t.every(o=>o.choices.every(_=>_.label.trim().length>0)))return s("error","All choices must have a label.");if(!t.every(o=>o.answer!=="NONE"))return s("error","All questions must have an answer. Please select one");try{await E.addQuiz({label:n.value,published:!1,questions:t}),s("success","Quiz created!"),c.push("/admin")}catch(o){s("error",o.message)}},onremove:l=>{const r=t.findIndex(m=>m.id===l);t.splice(r,1)}}}},L={class:"row mb-4"},B={class:"col"},S={class:"d-flex justify-content-between align-items-center"},D=e("h4",null,"Create new quiz",-1),F={class:"row"},H={class:"col"},I={class:"form-group"},M=e("label",null,"Quiz label",-1),O={class:"row mb-4"},P={class:"col"},T={class:"d-flex justify-content-between mb-4"};function V(c,s,t,n,u,f){const d=y("app-question");return i(),b(h,null,[e("div",L,[e("div",B,[e("div",S,[D,e("button",{class:"btn btn-success",onClick:s[0]||(s[0]=(...a)=>n.submit&&n.submit(...a))},"Save")])])]),e("div",F,[e("div",H,[e("div",I,[M,x(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=a=>n.label=a),placeholder:"Enter a label for the quiz"},null,512),[[A,n.label]])])])]),e("div",O,[e("div",P,[e("div",T,[e("b",null,"Number of questions: "+v(n.questions.length),1),e("b",null,"Total earnings: "+v(n.totalEarnings),1)]),(i(!0),b(h,null,N(n.questions,a=>(i(),Q(d,{key:a.id,question:a,onremove:n.onremove},null,8,["question","onremove"]))),128)),e("button",{class:"btn btn-secondary text-center w-100",onClick:s[2]||(s[2]=(...a)=>n.addQuestion&&n.addQuestion(...a))},"Add a question")])])],64)}var K=C(j,[["render",V]]);export{K as default};
