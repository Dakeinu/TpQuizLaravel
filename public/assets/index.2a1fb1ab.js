import{r as R,a as c,b as m,R as U,c as T,o as u,d,e as o,f as h,w as b,g as w,t as x,h as g,F as L,i as S,n as j,u as B,j as C,k as z,v as $,l as F,m as M,p as H,q as W}from"./vendor.20d4d45b.js";const K=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))e(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&e(n)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function e(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}};K();const E=R([]);function G(){function s(t,r){const e=Date.now().toString()+Math.random().toString();E.push({id:e,type:t,message:r}),setTimeout(()=>{const a=E.findIndex(i=>i.id===e);a!==-1&&E.splice(a,1)},3e3)}return s}const J="http://localhost:8000/api",l={};c.defaults.baseURL=J;function v(s){return async(...t)=>{let r=null;c.defaults.headers.common.Authorization=`Bearer ${A.value}`;try{r=await s(...t)}catch(e){if(e.response.status===401)return A.value="",y.value=null,k.value=!1,G();throw e}return c.defaults.headers.common.Authorization="",r}}l.login=async function(s,t){const{data:r}=await c.post("/auth/login",{email:s,password:t});return{token:r.access_token,user:r.user}};l.register=async function(s,t,r){const e={email:s,password:t,password_confirmation:r,name:`User #${Date.now().toString().slice(-6,-1)}`},{data:a}=await c.post("/auth/register",e);return a};l.getQuizzes=async function(){const{data:s}=await c.get("/quiz");return s};l.getQuiz=async function(s){const{data:t}=await c.get(`/quiz/${s}`);return t};l.addQuiz=v(async function(s){const{data:t}=await c.post("/quiz",s);return t});l.editQuiz=v(async function(s,t){const{data:r}=await c.put(`/quiz/${s}`,t);return r});l.removeQuiz=v(async function(s){const{data:t}=await c.delete(`/quiz/${s.id}`);return t});l.publishQuiz=v(async function(s){const{data:t}=await c.post(`/quiz/${s.id}/publish`);return t});l.unpublishQuiz=v(async function(s){const{data:t}=await c.post(`/quiz/${s.id}/unpublish`);return t});l.getQuestions=async function(s){const{data:t}=await c.get(`/quiz/${s}/questions`);return t};l.getChoices=async function(s){const{data:t}=await c.get(`/question/${s}/choices`);return t};l.submitQuiz=v(async function(s,t){const{data:r}=await c.post("/score",{answers:t,quiz_id:s});return r});l.getScores=async function(){const{data:s}=await c.get("/score");return s};l.getUser=async function(s){const{data:t}=await c.get("/user/"+s);return t};const k=m(!1),A=m(""),y=m(null);function I(){return{loggedIn:k,token:A,register:async(e,a,i)=>{await l.register(e,a,i)},login:async(e,a)=>{const{token:i,user:n}=await l.login(e,a);k.value=!0,A.value=i,y.value=n,y.value.isAdmin=y.value.id===1},logout:()=>{y.value=null,k.value=!1,A.value=""},user:y}}var P=(s,t)=>{const r=s.__vccOpts||s;for(const[e,a]of t)r[e]=a;return r};const X={components:{RouterLink:U},setup(){const{loggedIn:s,user:t,logout:r}=I();return{loggedIn:s,user:t,logout:r}}},Y={class:"card"},Z={class:"card-body"},tt={class:"navigation h-100 d-flex justify-content-end align-items-center"},et={class:"me-auto"},ot=o("h3",{class:"text-light mb-0"},[o("i",{class:"far fa-comments"}),g(" Quizzy ")],-1),st={class:"me-2"},nt=o("span",{class:"text-light mb-0"},[o("i",{class:"far fa-chart-bar"}),g(" Scores ")],-1),at={key:0,class:"me-2"},rt=o("button",{class:"btn btn-success"},"Admin Panel",-1),it={key:1},ct=o("button",{class:"btn btn-info"},"Log In | Register",-1),lt={key:2},ut=g(" Logged in as: "),dt=o("br",null,null,-1);function _t(s,t,r,e,a,i){const n=T("router-link");return u(),d("nav",Y,[o("div",Z,[o("ul",tt,[o("li",et,[h(n,{to:"/",style:{"text-decoration":"none"}},{default:b(()=>[ot]),_:1})]),o("li",st,[h(n,{to:"/scores",style:{"text-decoration":"none"}},{default:b(()=>[nt]),_:1})]),e.loggedIn&&e.user.isAdmin?(u(),d("li",at,[h(n,{to:"/admin"},{default:b(()=>[rt]),_:1})])):w("",!0),e.loggedIn?(u(),d("li",lt,[ut,o("b",null,x(e.user.name),1),dt,o("small",null,[o("a",{onClick:t[0]||(t[0]=(..._)=>e.logout&&e.logout(..._)),href:"#"},"Logout")])])):(u(),d("li",it,[h(n,{to:"/auth"},{default:b(()=>[ct]),_:1})]))])])])}var mt=P(X,[["render",_t]]);const ft={components:{AppNav:mt},setup(){function s(t){switch(t){case"success":return"alert-success";case"info":return"alert-info";case"warning":case"warn":return"alert-warning";case"danger":case"error":return"alert-danger";default:return"alert-primary"}}return{pool:E,alertClassFromType:s}}},ht={class:"notification-container"},pt={class:"container-fluid"},gt={class:"row"},vt={class:"col"},yt={class:"container my-4"},bt={class:"row"},wt={class:"col"},zt={class:"container"};function $t(s,t,r,e,a,i){const n=T("app-nav"),_=T("router-view");return u(),d(L,null,[o("div",ht,[o("div",pt,[o("div",gt,[o("div",vt,[(u(!0),d(L,null,S(e.pool.slice().reverse(),f=>(u(),d("div",{class:j(["alert",e.alertClassFromType(f.type)]),key:f.id},x(f.message),3))),128))])])])]),o("div",yt,[o("div",bt,[o("div",wt,[h(n)])])]),o("div",zt,[h(_)])],64)}var kt=P(ft,[["render",$t]]);const At="modulepreload",V={},qt="/",q=function(t,r){return!r||r.length===0?t():Promise.all(r.map(e=>{if(e=`${qt}${e}`,e in V)return;V[e]=!0;const a=e.endsWith(".css"),i=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${i}`))return;const n=document.createElement("link");if(n.rel=a?"stylesheet":At,a||(n.as="script",n.crossOrigin=""),n.href=e,document.head.appendChild(n),a)return new Promise((_,f)=>{n.addEventListener("load",_),n.addEventListener("error",f)})})).then(()=>t())},Tt={setup(){const s=B(),{login:t,register:r}=I(),e=m(""),a=m(""),i=m(""),n=m(""),_=m(""),f=m(!1);async function D(){try{await t(a.value,i.value),s.push("/")}catch(p){_.value=p.message}}async function O(){try{await r(a.value,i.value,n.value),Q("login"),_.value=""}catch(p){_.value=p.message}}function Q(p){e.value=p,window.history.replaceState(window.history.state,null,"?page="+p)}return{selectedTab:e,email:a,password:i,password_confirmation:n,error:_,loading:f,login:D,register:O,changeTab:Q}},created(){const t=new URLSearchParams(window.location.search).get("page");t&&(this.selectedTab=t)}},xt={class:"row"},Lt={class:"col"},Et={class:"card"},Pt={class:"card-body"},It={class:"card-title text-center"},Qt={key:0,class:"d-flex justify-content-center py-2"},Rt={class:"form-group"},St=o("label",{for:"email"},"Email address",-1),Ct={class:"form-group"},Vt=o("label",{for:"password"},"Password",-1),Nt=o("button",{type:"submit",class:"btn btn-primary my-2"},"Submit",-1),Dt=o("br",null,null,-1),Ot=g(" Don't have an account? "),Ut={class:"form-group"},jt=o("label",{for:"email"},"Email address",-1),Bt={class:"form-group"},Ft=o("label",{for:"password"},"Password",-1),Mt={class:"form-group"},Ht=o("label",{for:"password_confirmation"},"Password Confirmation",-1),Wt=o("button",{type:"submit",class:"btn btn-primary my-2"},"Submit",-1),Kt=o("br",null,null,-1),Gt=g(" Already have an account? ");function Jt(s,t,r,e,a,i){return u(),d("div",xt,[o("div",Lt,[o("div",Et,[o("div",Pt,[o("h5",It,x(e.selectedTab==""?"What do you want to do?":e.selectedTab=="login"?"Login":"Register"),1),e.selectedTab==""?(u(),d("div",Qt,[o("button",{onClick:t[0]||(t[0]=n=>e.changeTab("login")),class:"btn btn-secondary mx-2"},"Log In"),o("button",{onClick:t[1]||(t[1]=n=>e.changeTab("register")),class:"btn btn-secondary mx-2"},"Register")])):w("",!0),e.selectedTab=="login"?(u(),d("form",{key:1,onSubmit:t[5]||(t[5]=C((...n)=>e.login&&e.login(...n),["prevent"]))},[o("div",Rt,[St,z(o("input",{type:"email",class:"form-control",id:"email","onUpdate:modelValue":t[2]||(t[2]=n=>e.email=n)},null,512),[[$,e.email]])]),o("div",Ct,[Vt,z(o("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":t[3]||(t[3]=n=>e.password=n)},null,512),[[$,e.password]])]),Nt,Dt,o("small",null,[Ot,o("a",{href:"#",onClick:t[4]||(t[4]=n=>e.changeTab("register"))},"Register")])],32)):w("",!0),e.selectedTab=="register"?(u(),d("form",{key:2,onSubmit:t[10]||(t[10]=C((...n)=>e.register&&e.register(...n),["prevent"]))},[o("div",Ut,[jt,z(o("input",{type:"email",class:"form-control",id:"email","onUpdate:modelValue":t[6]||(t[6]=n=>e.email=n)},null,512),[[$,e.email]])]),o("div",Bt,[Ft,z(o("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":t[7]||(t[7]=n=>e.password=n)},null,512),[[$,e.password]])]),o("div",Mt,[Ht,z(o("input",{type:"password_confirmation",class:"form-control",id:"password_confirmation","onUpdate:modelValue":t[8]||(t[8]=n=>e.password_confirmation=n)},null,512),[[$,e.password_confirmation]])]),Wt,Kt,o("small",null,[Gt,o("a",{href:"#",onClick:t[9]||(t[9]=n=>e.changeTab("login"))},"Log In")])],32)):w("",!0)])])])])}var Xt=P(Tt,[["render",Jt]]);const Yt={setup(){const s=R([]),{loggedIn:t}=I();return F(async()=>{const r=await l.getQuizzes();s.splice(0,s.length,...r.filter(e=>e.published))}),{quizzes:s,loggedIn:t}}},Zt=o("div",{class:"row mb-4"},[o("div",{class:"col"},[o("h1",null,"Quizzes")])],-1),te={class:"row"},ee={class:"col-12 col-md-4"},oe={class:"card mb-2"},se={class:"card-body"},ne={class:"card-title"},ae={class:"card-text"},re=g("Take Quiz"),ie={key:0},ce=o("p",null,"No quizzes yet.",-1),le=[ce];function ue(s,t,r,e,a,i){const n=T("router-link");return u(),d(L,null,[Zt,o("div",te,[(u(!0),d(L,null,S(e.quizzes,_=>(u(),d("div",ee,[o("div",oe,[o("div",se,[o("div",ne,x(_.label),1),o("div",ae,[h(n,{to:`/take-quiz/${_.id}`,class:"btn btn-primary"},{default:b(()=>[re]),_:2},1032,["to"])])])])]))),256)),e.quizzes.length<=0?(u(),d("div",ie,le)):w("",!0)])],64)}var de=P(Yt,[["render",ue]]);const _e=[{path:"/",name:"Home",component:de},{path:"/auth",name:"Auth",component:Xt},{path:"/admin",name:"Admin",component:()=>q(()=>import("./Index.9ffe58f4.js"),["assets/Index.9ffe58f4.js","assets/Index.0b46908e.css","assets/vendor.20d4d45b.js"]),meta:{requiresAuth:!0}},{path:"/new-quiz",name:"NewQuiz",component:()=>q(()=>import("./NewQuiz.eddf429b.js"),["assets/NewQuiz.eddf429b.js","assets/vendor.20d4d45b.js","assets/question.4dac6f8d.js","assets/question.d43c0c2c.css"]),meta:{requiresAuth:!0}},{path:"/edit-quiz/:quizId",name:"EditQuiz",component:()=>q(()=>import("./EditQuiz.a1d1fa20.js"),["assets/EditQuiz.a1d1fa20.js","assets/vendor.20d4d45b.js","assets/question.4dac6f8d.js","assets/question.d43c0c2c.css"]),meta:{requiresAuth:!0}},{path:"/take-quiz/:quizId",name:"TakeQuiz",component:()=>q(()=>import("./TakeQuiz.5268d49a.js"),["assets/TakeQuiz.5268d49a.js","assets/vendor.20d4d45b.js"]),meta:{requiresAuth:!0}},{path:"/scores",name:"Scores",component:()=>q(()=>import("./Scores.7a948c11.js"),["assets/Scores.7a948c11.js","assets/vendor.20d4d45b.js"])},{path:"/:catchAll(.*)",redirect:"/"}],N=M({history:H(),routes:_e});N.beforeEach((s,t,r)=>{s.matched.some(a=>a.meta.requiresAuth)&&!k.value?r({path:"/auth"}):r()});W(kt).use(N).mount("#app");export{l as A,P as _,G as u};
